var package = {
    "attributes": {
        "ship": {
            "agility": 1.7333614683925813,
            "armorAvgDamageResonance": 0.6749999999999999,
            "armorEmDamageResonance": 0.5,
            "armorExplosiveDamageResonance": 0.9,
            "armorHP": 482.2734375,
            "armorKineticDamageResonance": 0.65,
            "armorMaxDamageResonance": 0.9,
            "armorMinDamageResonance": 0.5,
            "armorThermalDamageResonance": 0.65,
            "armorUniformity": 0.75,
            "avgDamageResonance": 0.67,
            "avgEHP": 1526.955738548636,
            "avgRPS": 3.2183908045977003,
            "baseWarpSpeed": 1,
            "capacitorCapacity": 328.125,
            "capacitorDurationMWD": 269000,
            "capacitorFraction": 0.6041856070387046,
            "capacitorStable": 1,
            "capacity": 140,
            "cpuLoad": 131,
            "cpuOutput": 162.5,
            "cpuRemaining": 31.5,
            "droneAlphaDamage": 279.1822497532548,
            "droneBandwidth": 25,
            "droneCapacity": 40,
            "droneDPS": 69.7955624383137,
            "emDamageResonance": 0.67,
            "explosiveDamageResonance": 0.67,
            "fwLpKill": 25,
            "gfxBoosterID": 394,
            "heatAttenuationHi": 0.5,
            "heatAttenuationLow": 0.5,
            "heatAttenuationMed": 0.5,
            "heatCapacityHi": 100,
            "heatCapacityLow": 100,
            "heatCapacityMed": 100,
            "heatDissipationRateHi": 0.01,
            "heatDissipationRateLow": 0.01,
            "heatDissipationRateMed": 0.01,
            "heatGenerationMultiplier": 1,
            "hiSlots": 3,
            "hp": 618.75,
            "hullEmDamageResonance": 1,
            "hullExplosiveDamageResonance": 1,
            "hullKineticDamageResonance": 1,
            "hullThermalDamageResonance": 1,
            "kineticDamageResonance": 0.67,
            "lowSlots": 3,
            "mainColor": 16777215,
            "mass": 1544000,
            "maxDamageResonance": 0.67,
            "maxDirectionalVelocity": 3000,
            "maxEHP": 1798.5074626865671,
            "maxLockedTargets": 5,
            "maxPassengers": 3,
            "maxRPS": 4.666666666666666,
            "maxTargetRange": 50000,
            "maxVelocity": 475.6794541029912,
            "maxVelocityMWD": 3208.1736770274993,
            "medSlots": 3,
            "minDamageResonance": 0.67,
            "minEHP": 1361.0074626865671,
            "minRPS": 2.333333333333333,
            "minTargetVelDmgMultiplier": 0.05,
            "moduleAlphaDamage": 31.308749999999996,
            "moduleDPS": 16.724759615384613,
            "powerLoad": 22.6,
            "powerOutput": 43.75,
            "powerRemaining": 21.15,
            "powerToSpeed": 1,
            "propulsionGraphicID": 394,
            "radius": 29,
            "rechargeRate": 131250,
            "requiredSkill1": 3328,
            "requiredSkill1Level": 1,
            "rigSize": 1,
            "rigSlots": 3,
            "scanMagnetometricStrength": 10.8,
            "scanResolution": 1162.5,
            "scanSpeed": 1875,
            "shieldAvgDamageResonance": 0.7250000000000001,
            "shieldCapacity": 437.5,
            "shieldEmDamageResonance": 1,
            "shieldExplosiveDamageResonance": 0.5,
            "shieldKineticDamageResonance": 0.6,
            "shieldMaxDamageResonance": 1,
            "shieldMinDamageResonance": 0.5,
            "shieldRechargeRate": 468750,
            "shieldThermalDamageResonance": 0.8,
            "shieldUniformity": 1,
            "shipBonusGF": 50,
            "shipBonusGF2": 37.5,
            "signatureRadius": 41,
            "signatureRadiusMWD": 246,
            "structureUniformity": 1,
            "techLevel": 1,
            "thermalDamageResonance": 0.67,
            "totalAlphaDamage": 310.49099975325475,
            "totalDPS": 86.52032205369831,
            "totalWarpScrambleStrength": 1,
            "typeColorScheme": 11331,
            "uniformity": 1,
            "upgradeCapacity": 400,
            "upgradeSlotsLeft": 3,
            "volume": 26500,
            "warpCapacitorNeed": 0.00000112,
            "warpSpeedMultiplier": 5
        },
        "modules": {
            "0": {
                "drawback": -5,
                "hp": 40,
                "implantBonusVelocity": 5.5,
                "location": 92,
                "mass": 200,
                "radius": 100,
                "rigSize": 1,
                "techLevel": 1,
                "typeID": 31177,
                "upgradeCost": 100,
                "volume": 5
            },
            "1": {
                "cpu": 25,
                "droneDamageBonus": 17,
                "hp": 75,
                "location": 12,
                "mass": 1,
                "metaLevel": 1,
                "power": 1,
                "radius": 1,
                "requiredSkill1": 3318,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3436,
                "requiredSkill2Level": 1,
                "techLevel": 1,
                "typeID": 41034,
                "volume": 5
            },
            "10": {
                "drawback": -5,
                "hp": 40,
                "implantBonusVelocity": 5.5,
                "location": 93,
                "mass": 200,
                "radius": 100,
                "rigSize": 1,
                "techLevel": 1,
                "typeID": 31177,
                "upgradeCost": 100,
                "volume": 5
            },
            "2": {
                "drawback": -5,
                "hp": 40,
                "location": 94,
                "mass": 200,
                "radius": 100,
                "rigSize": 1,
                "techLevel": 1,
                "typeID": 31105,
                "upgradeCost": 100,
                "velocityBonus": 7.25,
                "volume": 5
            },
            "3": {
                "alphaDamage": 15.654374999999998,
                "capNeedBonus": -30,
                "capacitorNeed": 0.55125,
                "capacity": 0.5,
                "chargeGroup1": 85,
                "chargeRate": 1,
                "chargeSize": 1,
                "chargeTypeID": 21384,
                "cpu": 3,
                "damageMultiplier": 2.6090625,
                "dps": 8.362379807692307,
                "duration": 1872,
                "entityFlyRangeMultiplier": 1.6,
                "falloff": 3750,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 0.45,
                "hp": 40,
                "kineticDamage": 3.6,
                "launcherGroup": 74,
                "location": 27,
                "mainColor": 5202838,
                "mass": 0.01,
                "maxRange": 13200,
                "metaGroupID": 4,
                "metaLevel": 2,
                "optimalSigRadius": 40000,
                "overloadRofBonus": -15,
                "power": 1.8,
                "radius": 10,
                "reloadTime": 5000,
                "requiredSkill1": 3301,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3300,
                "requiredSkill2Level": 1,
                "requiredThermoDynamicsSkill": 1,
                "slots": 1,
                "speed": 1872,
                "techLevel": 1,
                "thermalDamage": 2.4,
                "trackingSpeed": 234.609375,
                "typeColorScheme": 11324,
                "typeID": 7249,
                "volume": 0.0025,
                "weaponRangeMultiplier": 1.6
            },
            "4": {
                "agilityMultiplier": -14.5,
                "hp": 40,
                "implantBonusVelocity": 8.5,
                "location": 13,
                "mass": 100,
                "metaLevel": 1,
                "radius": 50,
                "requiredSkill1": 3394,
                "requiredSkill1Level": 1,
                "structureHPMultiplier": 0.9,
                "techLevel": 1,
                "typeID": 5599,
                "volume": 5
            },
            "5": {
                "cpu": 25,
                "droneDamageBonus": 17,
                "hp": 75,
                "location": 11,
                "mass": 1,
                "metaLevel": 1,
                "power": 1,
                "radius": 1,
                "requiredSkill1": 3318,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3436,
                "requiredSkill2Level": 1,
                "techLevel": 1,
                "typeID": 41034,
                "volume": 5
            },
            "6": {
                "alphaDamage": 15.654374999999998,
                "capNeedBonus": -30,
                "capacitorNeed": 0.55125,
                "capacity": 0.5,
                "chargeGroup1": 85,
                "chargeRate": 1,
                "chargeSize": 1,
                "chargeTypeID": 21384,
                "cpu": 3,
                "damageMultiplier": 2.6090625,
                "dps": 8.362379807692307,
                "duration": 1872,
                "entityFlyRangeMultiplier": 1.6,
                "falloff": 3750,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 0.45,
                "hp": 40,
                "kineticDamage": 3.6,
                "launcherGroup": 74,
                "location": 28,
                "mainColor": 5202838,
                "mass": 0.01,
                "maxRange": 13200,
                "metaGroupID": 4,
                "metaLevel": 2,
                "optimalSigRadius": 40000,
                "overloadRofBonus": -15,
                "power": 1.8,
                "radius": 10,
                "reloadTime": 5000,
                "requiredSkill1": 3301,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3300,
                "requiredSkill2Level": 1,
                "requiredThermoDynamicsSkill": 1,
                "slots": 1,
                "speed": 1872,
                "techLevel": 1,
                "thermalDamage": 2.4,
                "trackingSpeed": 234.609375,
                "typeColorScheme": 11324,
                "typeID": 7249,
                "volume": 0.0025,
                "weaponRangeMultiplier": 1.6
            },
            "7": {
                "capacitorNeed": 12,
                "cpu": 40,
                "duration": 5000,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 3.75,
                "hp": 40,
                "location": 19,
                "maxRange": 20000,
                "metaLevel": 1,
                "overloadRangeBonus": 20,
                "power": 1,
                "radius": 1,
                "requiredSkill1": 3435,
                "requiredSkill1Level": 1,
                "requiredThermoDynamicsSkill": 1,
                "techLevel": 1,
                "typeID": 5399,
                "volume": 5,
                "warpScrambleStrength": 1
            },
            "8": {
                "capacitorCapacityMultiplier": 0.75,
                "capacitorNeed": 26.25,
                "cpu": 25,
                "deadspaceUnsafe": 1,
                "duration": 10000,
                "heatAbsorbtionRateModifier": 0.04,
                "heatDamage": 14.25,
                "hp": 40,
                "location": 20,
                "massAddition": 500000,
                "maxGroupActive": 1,
                "metaLevel": 1,
                "overloadSpeedFactorBonus": 50,
                "power": 15,
                "radius": 1,
                "requiredSkill1": 3454,
                "requiredSkill1Level": 1,
                "requiredThermoDynamicsSkill": 1,
                "signatureRadiusBonus": 500,
                "speedBoostFactor": 1500000,
                "speedFactor": 613.2610103626943,
                "techLevel": 1,
                "typeID": 5971,
                "volume": 10
            },
            "9": {
                "capacitorNeed": 10,
                "capacity": 1,
                "chargeGroup1": 910,
                "chargeSize": 1,
                "chargeTypeID": 29011,
                "cpu": 10,
                "duration": 10000,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 2.55,
                "hp": 40,
                "launcherGroup": 212,
                "launcherGroup2": 290,
                "location": 21,
                "mainColor": 11646664,
                "mass": 1,
                "maxTargetRangeBonusBonus": -100,
                "metaLevel": 1,
                "overloadSensorModuleStrengthBonus": 15,
                "power": 1,
                "radius": 1,
                "reloadTime": 0.01,
                "requiredSkill1": 3428,
                "requiredSkill1Level": 1,
                "requiredThermoDynamicsSkill": 1,
                "scanResolutionBonus": 55,
                "scanResolutionBonusBonus": 100,
                "sensorStrengthBonusBonus": -100,
                "techLevel": 1,
                "typeID": 6160,
                "volume": 1
            }
        },
        "drones": [
            {
                "agility": 100,
                "alphaDamage": 86.41355349505504,
                "armorEmDamageResonance": 0.4,
                "armorExplosiveDamageResonance": 0.9,
                "armorHP": 202.5,
                "armorKineticDamageResonance": 0.75,
                "armorThermalDamageResonance": 0.65,
                "armorUniformity": 0.75,
                "capacitorCapacity": 1,
                "damageMultiplier": 4.320677674752752,
                "dps": 21.60338837376376,
                "droneBandwidthUsed": 5,
                "duration": 4000,
                "emDamageResonance": 1,
                "entityAttackRange": 2800,
                "entityChaseMaxDelay": 1,
                "entityChaseMaxDelayChance": 1,
                "entityChaseMaxDistance": 2800,
                "entityChaseMaxDuration": 2500,
                "entityChaseMaxDurationChance": 1,
                "entityCruiseSpeed": 900,
                "entityFlyRange": 700,
                "explosiveDamage": 20,
                "explosiveDamageResonance": 1,
                "falloff": 2000,
                "fighterAbilityAntiFighterMissileResistance": 1,
                "hp": 292.5,
                "kineticDamageResonance": 1,
                "mass": 4000,
                "maxAttackTargets": 1,
                "maxLockedTargets": 8,
                "maxRange": 2625,
                "maxVelocity": 6300,
                "metaLevel": 5,
                "optimalSigRadius": 25,
                "proximityRange": 1000,
                "quantity": 2,
                "radius": 15,
                "rechargeRate": 2500000,
                "requiredSkill1": 24241,
                "requiredSkill1Level": 5,
                "requiredSkill2": 12485,
                "requiredSkill2Level": 1,
                "requiredSkill3": 3436,
                "requiredSkill3Level": 5,
                "scanLadarStrength": 7.5,
                "scanSpeed": 2000,
                "shieldCapacity": 225,
                "shieldEmDamageResonance": 1,
                "shieldExplosiveDamageResonance": 0.5,
                "shieldKineticDamageResonance": 0.6,
                "shieldRechargeRate": 125000,
                "shieldThermalDamageResonance": 0.8,
                "shieldUniformity": 0.75,
                "signatureRadius": 25,
                "speed": 4000,
                "structureUniformity": 1,
                "techLevel": 2,
                "thermalDamageResonance": 1,
                "trackingSpeed": 4.86,
                "typeID": 2488,
                "uniformity": 0.75,
                "volume": 5
            },
            {
                "agility": 100,
                "alphaDamage": 106.35514276314468,
                "armorEmDamageResonance": 0.5,
                "armorExplosiveDamageResonance": 0.9,
                "armorHP": 202.5,
                "armorKineticDamageResonance": 0.65,
                "armorThermalDamageResonance": 0.65,
                "armorUniformity": 0.75,
                "capacitorCapacity": 1,
                "damageMultiplier": 5.317757138157234,
                "dps": 26.58878569078617,
                "droneBandwidthUsed": 5,
                "duration": 4000,
                "emDamageResonance": 1,
                "entityAttackRange": 2800,
                "entityChaseMaxDelay": 1,
                "entityChaseMaxDelayChance": 1,
                "entityChaseMaxDistance": 2800,
                "entityChaseMaxDuration": 2500,
                "entityChaseMaxDurationChance": 1,
                "entityCruiseSpeed": 660,
                "entityFlyRange": 700,
                "explosiveDamageResonance": 1,
                "falloff": 2000,
                "fighterAbilityAntiFighterMissileResistance": 1,
                "hp": 450,
                "kineticDamageResonance": 1,
                "mass": 3000,
                "maxAttackTargets": 1,
                "maxLockedTargets": 8,
                "maxRange": 2625,
                "maxVelocity": 4200,
                "metaLevel": 5,
                "optimalSigRadius": 25,
                "proximityRange": 1000,
                "quantity": 1,
                "radius": 15,
                "rechargeRate": 2500000,
                "requiredSkill1": 24241,
                "requiredSkill1Level": 5,
                "requiredSkill2": 12486,
                "requiredSkill2Level": 1,
                "requiredSkill3": 3436,
                "requiredSkill3Level": 5,
                "scanMagnetometricStrength": 7.5,
                "scanSpeed": 2000,
                "shieldCapacity": 112.5,
                "shieldEmDamageResonance": 1,
                "shieldExplosiveDamageResonance": 0.5,
                "shieldKineticDamageResonance": 0.6,
                "shieldRechargeRate": 125000,
                "shieldThermalDamageResonance": 0.8,
                "shieldUniformity": 0.75,
                "signatureRadius": 25,
                "speed": 4000,
                "structureUniformity": 1,
                "techLevel": 2,
                "thermalDamage": 20,
                "thermalDamageResonance": 1,
                "trackingSpeed": 3.267,
                "typeID": 2456,
                "uniformity": 0.75,
                "volume": 5
            }
        ],
        "types": {
            "21384": "Dread Guristas Iron Charge S",
            "2456": "Hobgoblin II",
            "2488": "Warrior II",
            "29011": "Scan Resolution Script",
            "31105": "Small Auxiliary Thrusters I",
            "31177": "Small Polycarbon Engine Housing I",
            "41034": "AE-K Compact Drone Damage Amplifier",
            "5399": "J5 Enduring Warp Disruptor",
            "5599": "Type-D Restrained Nanofiber Structure",
            "593": "Tristan",
            "5971": "5MN Cold-Gas Enduring Microwarpdrive",
            "6160": "F-90 Compact Sensor Booster",
            "7249": "75mm 'Scout' Accelerator Cannon"
        },
        "typeID": 593
    },
    "killmail": {
        "attackers": [
            {
                "alliance_id": 99007289,
                "character_id": 94815396,
                "corporation_id": 98535975,
                "damage_done": 331,
                "faction_id": 500004,
                "security_status": -4.6,
                "ship_type_id": 597,
                "weapon_type_id": 597
            },
            {
                "alliance_id": 99007289,
                "character_id": 1937826589,
                "corporation_id": 901319835,
                "damage_done": 312,
                "faction_id": 500004,
                "security_status": -5.5,
                "ship_type_id": 17841,
                "weapon_type_id": 2488
            },
            {
                "alliance_id": 99007289,
                "character_id": 97189261,
                "corporation_id": 1894214152,
                "damage_done": 305,
                "faction_id": 500004,
                "security_status": -4,
                "ship_type_id": 12044,
                "weapon_type_id": 12044
            },
            {
                "alliance_id": 99007289,
                "character_id": 1184744114,
                "corporation_id": 1894214152,
                "damage_done": 177,
                "faction_id": 500004,
                "security_status": -10,
                "ship_type_id": 37456,
                "weapon_type_id": 2488
            },
            {
                "alliance_id": 99007289,
                "character_id": 96363642,
                "corporation_id": 1894214152,
                "damage_done": 135,
                "faction_id": 500004,
                "security_status": -1.9,
                "ship_type_id": 17841,
                "weapon_type_id": 17841
            },
            {
                "alliance_id": 99007289,
                "character_id": 1029315109,
                "corporation_id": 98383832,
                "damage_done": 107,
                "faction_id": 500004,
                "security_status": -10,
                "ship_type_id": 597,
                "weapon_type_id": 597
            },
            {
                "alliance_id": 99007289,
                "character_id": 999003657,
                "corporation_id": 901319835,
                "damage_done": 91,
                "faction_id": 500004,
                "final_blow": true,
                "security_status": -9.8,
                "ship_type_id": 17841,
                "weapon_type_id": 3178
            },
            {
                "alliance_id": 99007289,
                "character_id": 151092177,
                "corporation_id": 98383832,
                "damage_done": 86,
                "faction_id": 500004,
                "security_status": -0.1,
                "ship_type_id": 17926,
                "weapon_type_id": 17926
            },
            {
                "alliance_id": 99007289,
                "character_id": 2114099972,
                "corporation_id": 98543755,
                "faction_id": 500004,
                "security_status": -0.7,
                "ship_type_id": 11190,
                "weapon_type_id": 4477
            }
        ],
        "killmail_id": 72008504,
        "killmail_time": "2018-08-21T19:35:34-07:00",
        "solar_system_id": 30045338,
        "victim": {
            "alliance_id": 99001742,
            "character_id": 132301536,
            "corporation_id": 98493593,
            "damage_taken": 1544,
            "faction_id": 500001,
            "items": [
                {
                    "flag": 13,
                    "item_type_id": 5599,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 92,
                    "item_type_id": 31177,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 11,
                    "item_type_id": 41034,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 21,
                    "item_type_id": 29011,
                    "quantity_dropped": 1
                },
                {
                    "flag": 27,
                    "item_type_id": 21384,
                    "quantity_destroyed": 182
                },
                {
                    "flag": 87,
                    "item_type_id": 2488,
                    "quantity_dropped": 2
                },
                {
                    "flag": 28,
                    "item_type_id": 7249,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 19,
                    "item_type_id": 5399,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 20,
                    "item_type_id": 5971,
                    "quantity_dropped": 1
                },
                {
                    "flag": 5,
                    "item_type_id": 29009,
                    "quantity_dropped": 1
                },
                {
                    "flag": 28,
                    "item_type_id": 21384,
                    "quantity_dropped": 182
                },
                {
                    "flag": 12,
                    "item_type_id": 41034,
                    "quantity_dropped": 1
                },
                {
                    "flag": 94,
                    "item_type_id": 31105,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 5,
                    "item_type_id": 21384,
                    "quantity_destroyed": 400
                },
                {
                    "flag": 21,
                    "item_type_id": 6160,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 27,
                    "item_type_id": 7249,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 87,
                    "item_type_id": 2456,
                    "quantity_dropped": 1
                },
                {
                    "flag": 93,
                    "item_type_id": 31177,
                    "quantity_destroyed": 1
                }
            ],
            "position": {
                "x": 1.1389965614430112e+12,
                "y": 1.3666911212086914e+10,
                "z": 3.013795990668917e+12
            },
            "ship_type_id": 593
        }
    },
    "nameMap": {
        "1029315109": "Cal Stantson",
        "11190": "Sentinel",
        "1184744114": "Ren Setion",
        "12044": "Enyo",
        "132301536": "Henro",
        "151092177": "Mr Mordan",
        "17841": "Federation Navy Comet",
        "17926": "Cruor",
        "1894214152": "Aideron Robotics",
        "1937826589": "Auran Veras",
        "2114099972": "Artwik Laduko",
        "21384": "Dread Guristas Iron Charge S",
        "2456": "Hobgoblin II",
        "2488": "Warrior II",
        "29009": "Targeting Range Script",
        "29011": "Scan Resolution Script",
        "31105": "Small Auxiliary Thrusters I",
        "31177": "Small Polycarbon Engine Housing I",
        "3178": "Light Neutron Blaster II",
        "37456": "Maulus Navy Issue",
        "41034": "AE-K Compact Drone Damage Amplifier",
        "4477": "Small Gremlin Compact Energy Neutralizer",
        "5399": "J5 Enduring Warp Disruptor",
        "5599": "Type-D Restrained Nanofiber Structure",
        "593": "Tristan",
        "597": "Punisher",
        "5971": "5MN Cold-Gas Enduring Microwarpdrive",
        "6160": "F-90 Compact Sensor Booster",
        "7249": "75mm 'Scout' Accelerator Cannon",
        "901319835": "Mecha Enterprises Fleet",
        "94815396": "The Lizzard King",
        "96363642": "Cygnus Delphi",
        "97189261": "Nosepicka",
        "98383832": "Alwar Fleet",
        "98493593": "Templis Training Academy",
        "98535975": "Shepards Of Mettle",
        "98543755": "Zeon Remnant",
        "99001742": "Templis CALSF",
        "99007289": "Federation Uprising",
        "999003657": "Genei"
    }
}



$(document).ready(function () {
    populateModules(package)
    getShip(package);
    getAttackers(package);
});

function setResonancePercentage(resonance, value) {
    if (!value) {
        value = 1;
    }
    value = 1 - value;
    value = (value * 100).toFixed(0);
    $('#' + resonance).css('width', value + '%').attr('aria-valuenow', value);
    $('#' + resonance).text(value + "%");
}

function setModuleSlot(type, slot, i) {
    typeNames = package.attributes.types;
    $("#" + type + slot).prepend('<img src="//imageserver.eveonline.com/Type/' + i.typeID + '_32.png" title="' + typeNames[i.typeID] + '" style="height: 32px; width: 32px;">')
    if (i.chargeTypeID > 0) $("#" + type + slot + "l").prepend('<img src="//imageserver.eveonline.com/Type/' + i.chargeTypeID + '_32.png" style="height: 32px; width: 32px;">')
}

function populateModules(package) {
    typeNames = package.attributes.types;
    $.each(package.attributes.modules, function (k, i) {
        switch (i.location) {
            case 27: // hiSlots
                setModuleSlot("high", "1", i);
                break;
            case 28: // hiSlots
                setModuleSlot("high", "2", i);
                break;
            case 29: // hiSlots
                setModuleSlot("high", "3", i);
                break;
            case 30: // hiSlots
                setModuleSlot("high", "4", i);
                break;
            case 31: // hiSlots
                setModuleSlot("high", "5", i);
                break;
            case 32: // hiSlots
                setModuleSlot("high", "6", i);
                break;
            case 33: // hiSlots
                setModuleSlot("high", "7", i);
                break;
            case 34: // hiSlots
                setModuleSlot("high", "8", i);
                break;

            case 19:
                setModuleSlot("mid", "1", i);
                break;
            case 20:
                setModuleSlot("mid", "2", i);
                break;
            case 21:
                setModuleSlot("mid", "3", i);
                break;
            case 22:
                setModuleSlot("mid", "4", i);
                break;
            case 23:
                setModuleSlot("mid", "5", i);
                break;
            case 24:
                setModuleSlot("mid", "6", i);
                break;
            case 25:
                setModuleSlot("mid", "7", i);
                break;
            case 26:
                setModuleSlot("mid", "8", i);
                break;

            case 11:
                setModuleSlot("low", "1", i);
                break;
            case 12:
                setModuleSlot("low", "2", i);
                break;
            case 13:
                setModuleSlot("low", "3", i);
                break;
            case 14:
                setModuleSlot("low", "4", i);
                break;
            case 15:
                setModuleSlot("low", "5", i);
                break;
            case 16:
                setModuleSlot("low", "6", i);
                break;
            case 17:
                setModuleSlot("low", "7", i);
                break;
            case 18:
                setModuleSlot("low", "8", i);
                break;

            case 92:
                setModuleSlot("rig", "1", i);
                break;

            case 93:
                setModuleSlot("rig", "2", i);
                break;
            case 94:
                setModuleSlot("rig", "3", i);
                break;

            case 164:
                setModuleSlot("sub", "1", i);
                break;
            case 165:
                setModuleSlot("sub", "2", i);
                break;
            case 166:
                setModuleSlot("sub", "3", i);
                break;
            case 167:
                setModuleSlot("sub", "4", i);
                break;
            case 168:
                setModuleSlot("sub", "5", i);
                break;
        }
    });
}

function getPortrait(a) {
    return a.character_id == undefined ?
        "corporation/" + a.corporation_id + "_64.png" :
        "character/" + a.character_id + "_64.jpg";
}

function getShipImage(a) {
    return a.ship_type_id + "_32.png";
}

function getWeaponImage(a) {
    return a.weapon_type_id == undefined ?
        a.ship_type_id + "_32.png" :
        a.weapon_type_id + "_32.png";
}

function getThatStuff(a) {
    var theStuff = "";

    if (a.character_id != undefined) theStuff += package.nameMap[a.character_id] + "<br>";
    if (a.corporation_id != undefined) theStuff += package.nameMap[a.corporation_id] + "<br>"
    if (a.alliance_id != undefined) theStuff += package.nameMap[a.alliance_id] + "<br>"

    return theStuff;
}

function getAttackers(package) {
    $("#numInvolved").text(simpleVal(package.killmail.attackers.length) + " Involved");
    var stripe = false;
    $.each(package.killmail.attackers, function (k, a) {
        var row = `
            <div class="row killmail" style="background-color: ${stripe ? "#06100a;" : "#16201a;"} padding: 0px;">
                <div class="col-xs-2 killmail" style="width: 64px">
                    <img src="//imageserver.eveonline.com/${getPortrait(a)}" style="width:64px; height: 64px">
                </div>
                <div class="col-xs-1 killmail" style="width: 32px">
                    <img src="//imageserver.eveonline.com/type/${getShipImage(a)}" style="width:32px; height: 32px">
                    <img src="//imageserver.eveonline.com/type/${getWeaponImage(a)}" style="width:32px; height: 32px">
                </div>
                <div class="col-xs-9 killmail" style="width: 264px;">
                    <div class="row" style="height: 64px; padding: 5px;">
                        <div class="col-xs-9">
                           ${getThatStuff(a)}
                        </div>
                        <div class="col-xs-3" style="height: 64px; text-align: right">
                            ${simpleVal(a.damage_done)}
                        </div>
                    </div>
                </div>
            </div>`;

        $("#attackers").append(row);
        stripe = !stripe;
    });
}

function getShip(package) {
    $("#bigship").prepend('<img src="//imageserver.eveonline.com/Render/' + package.attributes.typeID + '_256.png" style="height: 256px; width: 256px;">')

    var a = package.attributes.ship;
    setResonancePercentage("shieldEm", a.shieldEmDamageResonance)
    setResonancePercentage("shieldTherm", a.shieldThermalDamageResonance)
    setResonancePercentage("shieldKin", a.shieldKineticDamageResonance)
    setResonancePercentage("shieldExp", a.shieldExplosiveDamageResonance)
    setResonancePercentage("armorEm", a.armorEmDamageResonance)
    setResonancePercentage("armorTherm", a.armorThermalDamageResonance)
    setResonancePercentage("armorKin", a.armorKineticDamageResonance)
    setResonancePercentage("armorExp", a.armorExplosiveDamageResonance)
    setResonancePercentage("hullEm", a.emDamageResonance)
    setResonancePercentage("hullTherm", a.thermalDamageResonance)
    setResonancePercentage("hullKin", a.kineticDamageResonance)
    setResonancePercentage("hullExp", a.explosiveDamageResonance)

    $("#ehp").text(simpleVal(a.maxEHP) + " EHP");

    $("#hullHP").text(simpleVal(a.hp) + " HP");
    $("#armorHP").text(simpleVal(a.armorHP) + " HP");
    $("#shieldHP").text(simpleVal(a.shieldCapacity) + " HP");

    $("#rps").text(simpleVal(a.maxRPS) + " EHP/s");

    $("#warpStrength").text(simpleVal(a.totalWarpScrambleStrength));
    $("#webStrength").text(simpleVal(a.stasisWebifierStrength) + "%");
    $("#targets").text(simpleVal(a.maxLockedTargets));
    $("#scanRes").text(simpleVal(a.scanResolution));

    $("#cargo").text(simpleVal(a.capacity) + " mÂ³");

    $("#lockRange").text(simpleVal(a.maxTargetRange / 1000) + " km");
    $("#warpSpeed").text(a.warpSpeedMultiplier.toFixed(1) + " AU/s");

    $("#speed").text(simpleVal(a.maxVelocity) + " km/s");
    $("#mwdSpeed").text(simpleVal(a.maxVelocityMWD) + " km/s");

    $("#sigRadius").text(simpleVal(a.signatureRadius));
    $("#mwdSigRadius").text(simpleVal(a.signatureRadiusMWD));

    $.each(a, function (k, v) {
        switch (k) {
            case "hiSlots": // hiSlots
                $("#hiSlots").attr('src', '/i/fw/' + v + 'h.png');
                break;
            case "medSlots": // medSlots
                $("#medSlots").attr('src', '/i/fw/' + v + 'm.png');
                break;
            case "lowSlots": // lowSlots
                $("#lowSlots").attr('src', '/i/fw/' + v + 'l.png');
                break;
            case "rigSlots": // rigSlots
                $("#rigSlots").attr('src', '/i/fw/' + v + 'r.png');
                break;
            case "maxSubsystems": // SubSystems
                $("#subSlots").attr('src', '/i/fw/' + v + 's.png');
                break;
            case "serviceSlots": // structure services
                $("#subSlots").attr('src', '/i/fw/' + att + 's.png');
                break;
            case "capacitorCapacity":
                if (a.capacitorStable == 1.0) {
                    $("#capacitorDuration").text((100 * a.capacitorFraction).toFixed(0) + "% Stable");
                } else {
                    $("#capacitorDuration").text(convertMS(a.capacitorDuration));
                }

                $("#capacitorDetails").text(simpleVal(v) + " GJ")
                break;
            case "totalDPS":
                $("#totalDamage").html(v.toFixed(0) + " DPS")
                if (a.moduleDPS) $("#offenseModule").html(simpleVal(a.moduleDPS) + " DPS<br>" + simpleVal(a.moduleAlphaDamage) + " Alpha")
                if (a.droneDPS) $("#offenseDrone").html(simpleVal(a.droneDPS) + " DPS<br>" + simpleVal(a.droneAlphaDamage) + " Alpha")
                break;

            case "scanRadarStrength":
                $("#sensorStrength").text(simpleVal(v));
                break;
            case "scanLadarStrength":
                $("#sensorStrength").text(simpleVal(v));
                break;
            case "scanMagnetometricStrength":
                $("#sensorStrength").text(simpleVal(v));
                break;
            case "scanGravimetricStrength":
                $("#sensorStrength").text(simpleVal(v));
                break;
            case "remoteArmorDamageAmountPerSecond":
                $("#remoteArmor").text(simpleVal(v) + " hp/s");
                $(".remoteRepair").removeClass('hidden');
                break;
            case "remoteStructureDamageAmountPerSecond":
                $("#remoteHull").text(simpleVal(v) + " hp/s");
                $(".remoteRepair").removeClass('hidden');
                break;
            case "remoteShieldBonusAmountPerSecond":
                $("#remoteShield").text(simpleVal(v) + " hp/s");
                $(".remoteRepair").removeClass('hidden');
                break;
            case "remotePowerTransferAmountPerSecond":
                $("#remotePower").text(simpleVal(v) + " GJ/s");
                $(".remoteRepair").removeClass('hidden');
                break;
        }
    });
}